# Настройка DHCP сервера \(isc-dhcp-server\)

Устанавливаем isc-dhcp-server используя команду:

```text
sudo apt-get install idc-dhcp-server
```

Отредактируем файл `/etc/default/isc-dhcp-server` для определения интерфейса, который будет использовать DHCPD для обработки DHCP-запросов, с помощью опции INTERFACES. Файл будет иметь следующий вид:

```text
INTERFACESv4="enp0s3"
```

Где `enp0s3` интерфейс к которому подключаются клиенты из внутренней сети и который будет слушать DHCP;

Далее настроим сервер для раздачи адресов всем устройствам, которые будут спрашивать у сервера. Редактируем файл `/etc/dhcp/dhcpd.conf` Файл будет иметь следующий вид:

```text
default-lease-time 600;
max-lease-time 7200;

subnet 172.16.14.0 netmask 255.255.255.0 {
    range 172.16.14.30 172.16.14.55;
    option routers 192.168.31.18;
    option domain-name-server 172.16.14.1;
}
```

Где `default-lease-time` - время аренды \(в секундах\) адреса у сервера;

`max-lease-time` - максимальное время аренды адреса;

`subnet` - описывает сеть ip и ее маску;

`range` - диапазон адресов с которых по требованию клиента будут предоставляться адреса;

`option routers` - адрес роутера. Это должен быть адрес интерфейса через который пользователи попадают в интернет

`option domain-name-servers` - адрес DNS сервера. Указывает на то, что сервер расположен на этом же компьютере и слушает интерфейс с адресом `172.16.14.1`.

Для выделения конкретным клиентам фиксированной\(статические\) IP-адреса нужно добавить в файл конфигурации секции следующего вида:

```text
host Accountant { hardware ethernet [Mac-адрес]; fixed-address 172.16.14.25}
```

Де `hardware ethernet` – MAC-адрес клієнта;

`fixed-address` – бажана IP-адреса. Перевіримо роботу dhcp на клієнта. Для цього подивимось ip-адресу:

```text
ifconfig | grep "inet " | grep -v 127.0.0.1
```

